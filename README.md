# NoobWebServer
此项目是自己实现的静态资源服务器，支持HEAD、GET请求，支持长连接，实现了异步日志。

# 使用

# 特性
* 采用多线程+事件循环（epoll）的设计。
* 采用优先队列实现定时器，及时关闭超时连接。 
* 实现了简单的异步日志。
* 实现了基于有限状态机的http parser。parser支持长连接，可解析chunked encoding request。

# 设计
## 并发模型
程序可分为主线程和n个子线程；
主线程循环accept新连接，然后异步唤醒子线程，把连接以轮询的方式分发给子线程；
每个子线程运行一个事件循环（epoll），负责解析request、构造response、以及维护定时器移除超时的连接。

## 异步日志

https://www.ietf.org/rfc/rfc2616.txt

## http parser

# 性能



为什么不一个线程epoll_wait，把就绪事件放到队列中，让线程池执行任务？
因为两个就绪的事件可能有关联(例如同一连接的两次可读，那么这两次的读后的decode就必须同步)，如果两个有关联的事件被分配到了线程池中，那么同步它们会是个大问题。


